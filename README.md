# ğŸ† èŠ±ç« (Hanabi) - æ—¥å¼ç¦…æ„çƒŸèŠ±

<div align="center">

**ç”¨æ‰‹åŠ¿å¬å”¤å¤œç©ºä¸­çš„è‰ºæœ¯ | Summon art in the night sky with your hands**

[![React](https://img.shields.io/badge/React-19.2-61DAFB?logo=react)](https://react.dev)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8-3178C6?logo=typescript)](https://www.typescriptlang.org)
[![MediaPipe](https://img.shields.io/badge/MediaPipe-0.10-00897B)](https://mediapipe.dev)
[![Vite](https://img.shields.io/badge/Vite-6.2-646CFF?logo=vite)](https://vitejs.dev)

[English](#english) | [ä¸­æ–‡](#ä¸­æ–‡)

</div>

---

## ä¸­æ–‡

### âœ¨ é¡¹ç›®ç®€ä»‹

èŠ±ç«æ˜¯ä¸€ä¸ªèåˆäº†**æ‰‹åŠ¿è¯†åˆ«**ã€**ç‰©ç†å¼•æ“**å’Œ**æ—¥å¼ç¾å­¦**çš„äº¤äº’å¼çƒŸèŠ±ä½“éªŒã€‚é€šè¿‡æ‘„åƒå¤´æ•æ‰ä½ çš„æ‰‹åŠ¿ï¼Œç”¨æåˆåŠ¨ä½œè“„åŠ›ï¼Œé‡Šæ”¾æ—¶ç»½æ”¾å‡ºç»šä¸½çš„çƒŸèŠ±ã€‚æ”¯æŒ 9 ç§ä¼ ç»Ÿæ—¥å¼çƒŸèŠ±ç±»å‹ï¼Œæ¯ä¸€æœµéƒ½æœ‰ç‹¬ç‰¹çš„ç‰©ç†ç‰¹æ€§å’Œè§†è§‰æ•ˆæœã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- ğŸ–ï¸ **åŒæ‰‹åä½œ** - æ”¯æŒåŒæ—¶æ£€æµ‹ 2 åªæ‰‹ï¼Œåˆ›é€ æ›´ä¸°å¯Œçš„äº¤äº’
- âš¡ **è“„åŠ›ç³»ç»Ÿ** - æåˆæ—¶é—´è¶Šé•¿ï¼ŒçƒŸèŠ±è¶Šå£®è§‚ï¼ˆæœ€é«˜ 3 å€å¨åŠ›ï¼‰
- ğŸ¨ **9 ç§çƒŸèŠ±** - èŠèŠ±ã€ç‰¡ä¸¹ã€æŸ³æ ‘ã€æ£•æ¦ˆã€åå­—ç­‰ä¼ ç»Ÿæ—¥å¼çƒŸèŠ±
- ğŸµ **éŸ³æ•ˆç³»ç»Ÿ** - å‘å°„å’Œçˆ†ç‚¸éŸ³æ•ˆï¼Œå¯åˆ‡æ¢é™éŸ³
- ğŸ“± **ç§»åŠ¨ç«¯ä¼˜åŒ–** - æ”¯æŒè§¦æ‘¸å±ï¼Œæ€§èƒ½ä¼˜åŒ–é€‚é…æ‰‹æœº
- ğŸ¤– **æœºå™¨äººæ‰©å±•** - å¯è¿æ¥ ESP32-S3 æ¡Œé¢æœºå™¨äººè¿›è¡Œç‰©ç†äº¤äº’

### ğŸ® ä½¿ç”¨æ–¹æ³•

1. **å…è®¸æ‘„åƒå¤´æƒé™** - é¦–æ¬¡è®¿é—®æ—¶æˆæƒæ‘„åƒå¤´
2. **ä¼¸å‡ºæ‰‹æŒ** - å°†æ‰‹æ”¾åœ¨æ‘„åƒå¤´å‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«
3. **æåˆè“„åŠ›** - é£ŸæŒ‡å’Œå¤§æ‹‡æŒ‡æåˆï¼Œå±å¹•ä¼šå‡ºç°å……èƒ½æ•ˆæœ
4. **é‡Šæ”¾ç»½æ”¾** - æ¾å¼€æ‰‹æŒ‡ï¼ŒçƒŸèŠ±åœ¨æåˆä½ç½®çˆ†ç‚¸
5. **åŒæ‰‹åä½œ** - åŒæ—¶ä½¿ç”¨ä¸¤åªæ‰‹åˆ›é€ æ›´å£®è§‚çš„çƒŸèŠ±ç§€

**å¿«æ·æ“ä½œ**ï¼š
- ç‚¹å‡»/è§¦æ‘¸å±å¹• - ç›´æ¥å‘å°„çƒŸèŠ±
- å³ä¸‹è§’çŠ¶æ€æ  - æŸ¥çœ‹æ‰‹åŠ¿è¯†åˆ«çŠ¶æ€
- å·¦ä¸Šè§’ "Test All Types" - æµ‹è¯•æ‰€æœ‰çƒŸèŠ±ç±»å‹

### ğŸ† çƒŸèŠ±ç±»å‹

| ç±»å‹ | æ—¥æ–‡ | ç‰¹ç‚¹ |
|------|------|------|
| Chrysanthemum | èŠ | ç»å…¸çƒå½¢ï¼Œç²’å­å‡åŒ€æ‰©æ•£ |
| Peony | ç‰¡ä¸¹ | å¤§å‹çƒå½¢ï¼Œå¸¦æ‹–å°¾æ•ˆæœ |
| Willow | æŸ³ | ä¸‹å‚æŸ³æ¡çŠ¶ï¼Œä¼˜é›…é£˜è½ |
| Spike | é’ˆ | å°–é”æ”¾å°„çŠ¶ï¼Œé€Ÿåº¦å¿« |
| Palm | æ£•æ¦ˆ | å‘ä¸Šå–·å°„ï¼Œåƒæ£•æ¦ˆæ ‘ |
| Crossette | åå­— | çˆ†ç‚¸ååˆ†è£‚æˆå¤šä¸ªå°çƒŸèŠ± |
| Dahlia | å¤§ä¸½èŠ± | å¤šå±‚æ¬¡èŠ±ç“£çŠ¶ |
| Kamuro | å† èŠ | é‡‘è‰²æ‹–å°¾ï¼Œç¼“æ…¢ä¸‹è½ |
| Brocade | é”¦å†  | é—ªçƒé‡‘è‰²ç²’å­ |

### ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/hanabi-fireworks.git
cd hanabi-fireworks

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

è®¿é—® `http://localhost:5173` å¼€å§‹ä½“éªŒã€‚

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React 19.2 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 6.2
- **æ‰‹åŠ¿è¯†åˆ«**: MediaPipe Hand Landmarker
- **AI é›†æˆ**: Google Generative AI
- **ç‰©ç†å¼•æ“**: è‡ªç ”ç²’å­ç³»ç»Ÿ
- **éŸ³é¢‘**: Web Audio API

### ğŸ“ é¡¹ç›®ç»“æ„

```
hanabi-fireworks/
â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ fireworkEngine.ts   # çƒŸèŠ±ç‰©ç†å¼•æ“
â”‚   â””â”€â”€ audioManager.ts     # éŸ³æ•ˆç®¡ç†å™¨
â”œâ”€â”€ types.ts                # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ constants.ts            # çƒŸèŠ±é…ç½®å¸¸é‡
â”œâ”€â”€ server/
â”‚   â””â”€â”€ websocket-server.js # WebSocket æœåŠ¡å™¨ï¼ˆæœºå™¨äººé€šä¿¡ï¼‰
â””â”€â”€ xiao-robot-firmware/    # ESP32-S3 æœºå™¨äººå›ºä»¶
    â””â”€â”€ src/main.cpp
```

### ğŸ¤– æœºå™¨äººæ‰©å±•ï¼ˆå¯é€‰ï¼‰

é¡¹ç›®æ”¯æŒè¿æ¥ **Seeed XIAO ESP32-S3** æ¡Œé¢æœºå™¨äººï¼Œå®ç°ç‰©ç†ä¸–ç•Œçš„äº¤äº’ï¼š

**ç¡¬ä»¶éœ€æ±‚**ï¼š
- Seeed XIAO ESP32-S3 Sense
- VL53L0X ToF è·ç¦»ä¼ æ„Ÿå™¨ Ã— 2
- SG90 èˆµæœº Ã— 2-4
- WS2812B LED ç¯å¸¦
- MPU6050 é™€èºä»ªï¼ˆå¯é€‰ï¼‰

**äº¤äº’æ¨¡å¼**ï¼š
1. **å¬å”¤å¸ˆæ¨¡å¼** - æœºå™¨äººæŒ¥æ‰‹è§¦å‘çƒŸèŠ±
2. **æŒ‡æŒ¥å®¶æ¨¡å¼** - æœºå™¨äººç¼–æ’çƒŸèŠ±äº¤å“ä¹
3. **å…±èˆæ¨¡å¼** - äººæœºåŒæ­¥èˆè¹ˆ
4. **æƒ…ç»ªæ¨¡å¼** - æœºå™¨äººæ„ŸçŸ¥æƒ…ç»ªå¹¶è¡¨è¾¾

è¯¦è§ [ROBOT_INTERACTION_DESIGN.md](./ROBOT_INTERACTION_DESIGN.md)

**å¯åŠ¨æœºå™¨äººæœåŠ¡å™¨**ï¼š
```bash
cd server
npm install
node websocket-server.js
```

### ğŸ¨ è®¾è®¡ç†å¿µ

èŠ±ç«çš„è®¾è®¡çµæ„Ÿæ¥è‡ªæ—¥æœ¬ä¼ ç»ŸçƒŸèŠ±å¤§ä¼šï¼ˆèŠ±ç«å¤§ä¼šï¼‰å’Œç¦…å®—ç¾å­¦ï¼š

- **ä¾˜å¯‚ (Wabi-Sabi)** - æ¥å—ä¸å®Œç¾ï¼Œæ¯æœµçƒŸèŠ±éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„
- **é—´ (Ma)** - ç•™ç™½çš„è‰ºæœ¯ï¼Œå¤œç©ºæ˜¯ç”»å¸ƒ
- **å¹½ç„ (YÅ«gen)** - æ·±é‚ƒç¥ç§˜çš„ç¾æ„Ÿ
- **ç‰©å“€ (Mono no Aware)** - çƒŸèŠ±è½¬ç¬å³é€çš„ç¾ä¸½

### ğŸ“± ç§»åŠ¨ç«¯æ”¯æŒ

é¡¹ç›®é’ˆå¯¹ç§»åŠ¨è®¾å¤‡è¿›è¡Œäº†ä¼˜åŒ–ï¼š
- é™ä½æ‘„åƒå¤´åˆ†è¾¨ç‡ï¼ˆ480x360ï¼‰
- è·³å¸§æ£€æµ‹ï¼ˆæ¯ 3 å¸§æ£€æµ‹ä¸€æ¬¡ï¼‰
- è§¦æ‘¸å±æ”¯æŒ
- é˜²æ­¢åŒå‡»ç¼©æ”¾
- CPU æ¨¡å¼è¿è¡Œï¼ˆæ›´ç¨³å®šï¼‰

### ğŸ”§ é…ç½®è¯´æ˜

**ç¯å¢ƒå˜é‡** (`.env.local`):
```env
VITE_GEMINI_API_KEY=your_api_key_here
```

**çƒŸèŠ±å‚æ•°è°ƒæ•´** (`constants.ts`):
```typescript
export const FIREWORK_CONFIGS = {
  Chrysanthemum: {
    particleCount: 100,
    speed: 3,
    gravity: 0.05,
    // ...
  }
}
```

### ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ MIT åè®® - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

### ğŸ™ è‡´è°¢

- [MediaPipe](https://mediapipe.dev) - å¼ºå¤§çš„æ‰‹åŠ¿è¯†åˆ«
- [React](https://react.dev) - ä¼˜é›…çš„ UI æ¡†æ¶
- [Vite](https://vitejs.dev) - æé€Ÿçš„æ„å»ºå·¥å…·
- æ—¥æœ¬ä¼ ç»ŸçƒŸèŠ±è‰ºæœ¯ - è®¾è®¡çµæ„Ÿæ¥æº

---

## English

### âœ¨ Introduction

Hanabi is an interactive firework experience that combines **gesture recognition**, **physics engine**, and **Japanese aesthetics**. Capture your hand gestures through the camera, charge by pinching, and release to bloom stunning fireworks. Supports 9 traditional Japanese firework types, each with unique physics and visual effects.

**Key Features**:
- ğŸ–ï¸ **Dual-hand Support** - Detect up to 2 hands simultaneously for richer interactions
- âš¡ **Charging System** - Longer pinch = more spectacular fireworks (up to 3x power)
- ğŸ¨ **9 Firework Types** - Chrysanthemum, Peony, Willow, Palm, Crossette, and more
- ğŸµ **Sound System** - Launch and explosion sound effects with mute toggle
- ğŸ“± **Mobile Optimized** - Touch screen support with performance tuning
- ğŸ¤– **Robot Extension** - Connect ESP32-S3 desktop robot for physical interaction

### ğŸ® How to Use

1. **Allow Camera Permission** - Grant camera access on first visit
2. **Show Your Hand** - Place hand in front of camera for auto-detection
3. **Pinch to Charge** - Pinch index finger and thumb, see charging effect
4. **Release to Bloom** - Release fingers, firework explodes at pinch position
5. **Dual-hand Collaboration** - Use both hands for spectacular shows

**Quick Actions**:
- Click/Touch screen - Launch firework directly
- Bottom-right status - Check gesture recognition status
- Top-left "Test All Types" - Test all firework types

### ğŸ† Firework Types

| Type | Japanese | Characteristics |
|------|----------|-----------------|
| Chrysanthemum | èŠ | Classic sphere, uniform particle spread |
| Peony | ç‰¡ä¸¹ | Large sphere with trailing effect |
| Willow | æŸ³ | Drooping willow-like, elegant fall |
| Spike | é‡ | Sharp radial, high speed |
| Palm | æ£•æ¦ˆ | Upward spray, palm tree-like |
| Crossette | åå­— | Splits into multiple small fireworks |
| Dahlia | å¤§ä¸½èŠ± | Multi-layered petal shape |
| Kamuro | å† èŠ | Golden trail, slow descent |
| Brocade | é”¦å†  | Sparkling golden particles |

### ğŸš€ Quick Start

```bash
# Clone repository
git clone https://github.com/yourusername/hanabi-fireworks.git
cd hanabi-fireworks

# Install dependencies
npm install

# Start dev server
npm run dev

# Build for production
npm run build
```

Visit `http://localhost:5173` to start.

### ğŸ› ï¸ Tech Stack

- **Frontend**: React 19.2 + TypeScript
- **Build Tool**: Vite 6.2
- **Gesture Recognition**: MediaPipe Hand Landmarker
- **AI Integration**: Google Generative AI
- **Physics Engine**: Custom particle system
- **Audio**: Web Audio API

### ğŸ“ Project Structure

```
hanabi-fireworks/
â”œâ”€â”€ App.tsx                 # Main app component
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ fireworkEngine.ts   # Firework physics engine
â”‚   â””â”€â”€ audioManager.ts     # Audio manager
â”œâ”€â”€ types.ts                # TypeScript type definitions
â”œâ”€â”€ constants.ts            # Firework configuration constants
â”œâ”€â”€ server/
â”‚   â””â”€â”€ websocket-server.js # WebSocket server (robot communication)
â””â”€â”€ xiao-robot-firmware/    # ESP32-S3 robot firmware
    â””â”€â”€ src/main.cpp
```

### ğŸ¤– Robot Extension (Optional)

Connect **Seeed XIAO ESP32-S3** desktop robot for physical world interaction:

**Hardware Requirements**:
- Seeed XIAO ESP32-S3 Sense
- VL53L0X ToF distance sensor Ã— 2
- SG90 servo Ã— 2-4
- WS2812B LED strip
- MPU6050 gyroscope (optional)

**Interaction Modes**:
1. **Summoner Mode** - Robot gestures trigger fireworks
2. **Conductor Mode** - Robot orchestrates firework symphony
3. **Dance Mode** - Human-robot synchronized dance
4. **Emotion Mode** - Robot senses and expresses emotions

See [ROBOT_INTERACTION_DESIGN.md](./ROBOT_INTERACTION_DESIGN.md) for details.

**Start Robot Server**:
```bash
cd server
npm install
node websocket-server.js
```

### ğŸ¨ Design Philosophy

Hanabi's design is inspired by traditional Japanese firework festivals (èŠ±ç«å¤§ä¼š) and Zen aesthetics:

- **Wabi-Sabi (ä¾˜å¯‚)** - Embrace imperfection, each firework is unique
- **Ma (é–“)** - Art of negative space, night sky as canvas
- **YÅ«gen (å¹½ç„)** - Profound mysterious beauty
- **Mono no Aware (ç‰©å“€)** - Beauty of transient fireworks

### ğŸ“± Mobile Support

Optimized for mobile devices:
- Reduced camera resolution (480x360)
- Frame skipping (detect every 3rd frame)
- Touch screen support
- Prevent double-tap zoom
- CPU mode for stability

### ğŸ”§ Configuration

**Environment Variables** (`.env.local`):
```env
VITE_GEMINI_API_KEY=your_api_key_here
```

**Firework Parameters** (`constants.ts`):
```typescript
export const FIREWORK_CONFIGS = {
  Chrysanthemum: {
    particleCount: 100,
    speed: 3,
    gravity: 0.05,
    // ...
  }
}
```

### ğŸ¤ Contributing

Issues and Pull Requests are welcome!

1. Fork the repository
2. Create feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Open Pull Request

### ğŸ“„ License

This project is licensed under the MIT License - see [LICENSE](LICENSE) file

### ğŸ™ Acknowledgments

- [MediaPipe](https://mediapipe.dev) - Powerful gesture recognition
- [React](https://react.dev) - Elegant UI framework
- [Vite](https://vitejs.dev) - Lightning-fast build tool
- Traditional Japanese firework art - Design inspiration

---

<div align="center">

**Made with â¤ï¸ and âœ¨**

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ | If this project helps you, please give it a â­ï¸

</div>
